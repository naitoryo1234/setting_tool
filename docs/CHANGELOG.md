# Changelog

## 2026-02-13
### Fixed
- **データ検索ロジック修正**: `lib/actions.ts` の `searchRecords` にて、開始日と終了日が同一の場合の検索範囲を正しくその日の終わりまで拡張するように修正（時刻による検索漏れを防止）。
- **環境設定不整合の解消**: アプリケーション（`npm run dev`）が古い環境変数キャッシュを保持していた問題を特定し、サーバー再起動により解消。これにより復元データが表示されない問題を解決。

### Data Restoration
- **データ復旧**: バックアップから2月12日のデータ（北斗転生など）を正常に復元。
- **データクリーンアップ**: マギレコの未来データ（2026年2月15日以降）を削除し、データベースの整合性を確保。

### Added
- **検証用ページ**: `app/debug-check/page.tsx` （一時作成・削除済み）により、データベース接続情報とレコード内容を直接確認する手段を提供。
- **検証用スクリプト**: `scripts/check_feb12_data.ts` などの整合性チェックツールを作成。

## 2024-02-12
### Added
- **データバックアップ機能**: `npm run backup` でデータベースの全レコードをJSON形式でバックアップする機能を追加。
- **画像解析スクリプト修正**: 重複データの排除ロジックを追加し、データの整合性を担保。
- **UI改善**: 
    - 集計ページの日付入力フォームをモバイル向けに最適化（幅縮小、レイアウト調整）。
    - 台別テーブルのモバイル表示を改善（ヘッダー短縮、幅圧縮、中央揃え、ソート矢印非表示）。
    - 記録一覧のショートカット機能追加（台番タップで履歴遷移）。

### Fixed
- **データ不整合修正**: 2月10日・11日の重複レコードおよび「北斗転生」の過剰データを削除・修正。
- **Lintエラー修正**: 未使用変数の削除、型定義の修正。
- **Vercelビルド修正**: プロダクションビルド時の型エラー修正およびDB設定手順の追加。

### Changed
- **データ管理**: バックアップファイルを `backup/` ディレクトリに保存するように変更。
- **Git**: リモートリポジトリ（GitHub）へのプッシュ完了（force pushにより初期化）。
