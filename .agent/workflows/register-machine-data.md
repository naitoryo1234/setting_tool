---
description: 画像解析によるパチスロデータ登録フロー
---

# データ登録ワークフロー

このワークフローは、ユーザーが提供した「データカウンター/一覧の画像」からデータを抽出し、データベースへ登録する手順です。

## 前提条件
- 対象機種: **北斗の拳 転生** (現時点での自動推定対応機種)
- コマンド: `npm run register-data`

## 手順

1. **画像の受け取り**
   - ユーザーから画像が提供されます。
   - 日付、例外的な台（確定差枚）の情報も同時に受け取ります。

2. **データ抽出・コマンド生成 (AI作業)**
   - 画像を解析し、以下のデータセットを作成します。
     - `台番号`
     - `BIG回数`
     - `累計ゲーム数`
     - `確定差枚` (例外指定がある場合のみ)
   
   - [解析プロンプト](.agent/prompts/image_analysis.md) に基づき、以下の形式のコマンドを構築します。
     ```bash
     npm run register-data -- --date="YYYY-MM-DD" --machine="北斗" --data="238 26 2770, 245 62 2459 7500"
     ```

3. **登録実行 (AI作業)**
   - 生成したコマンドを実行します。
   - `Successfully registered X records.` のログが出れば成功です。

4. **結果報告**
   - 登録されたデータ（推定差枚を含む）をユーザーに報告します。
   - 実測値との大きな乖離がないか確認を促します。
